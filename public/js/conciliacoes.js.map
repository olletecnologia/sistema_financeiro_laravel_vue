{"version":3,"sources":["novo.js","pesquisar.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"conciliacoes.js","sourcesContent":["/**\r\n * Created by pabliciotjg on 01/09/2017.\r\n */\r\n\r\n\r\n//Inicializa o modal de criação de lançamentos\r\n$(document).on('click', '.criarNovo', function () {\r\n\r\n    valor = $(this).attr('value');\r\n\r\n    valor >= 0 ? slug = 'Recebimento' : slug = 'Pagamento';\r\n\r\n    $('.modal-title').text('Gerar Lançamentos de ' + slug);\r\n\r\n    $('#myModalNovo' + slug).modal('show');\r\n\r\n    idDiv = $(this).attr('id');\r\n\r\n    $('.id_div').val(idDiv);\r\n\r\n});\r\n\r\n//AQUI TA DANDO AQUELE BUG DOIDO\r\n$(document).ready(function () {\r\n\r\n    idDiv = $('#id_session').val();\r\n\r\n    if (isset(idDiv)) {\r\n\r\n        idConta = $('#lancamento_id').val();\r\n\r\n        tipoLancamento = $('#tipoLancamento').val();\r\n\r\n        seletor = '#conciliacao_' + idDiv;\r\n\r\n        if (tipoLancamento == \"pagamento\") {\r\n\r\n            lancadosPagamentoSelected(idConta, seletor)\r\n\r\n        } else if (tipoLancamento == \"recebimento\") {\r\n\r\n            lancadosRecebimentoSelected(idConta, seletor)\r\n\r\n        }\r\n    }\r\n\r\n\r\n});\r\n\r\nfunction lancadosPagamentoSelected(id, seletor) {\r\n\r\n    $.ajax({\r\n        url: \"/conciliacoes/lancadosPagamentoSelected\",\r\n        type: \"post\",\r\n        data: {\r\n            '_token': $('input[name=_token]').val(),\r\n            'id': id\r\n        },\r\n        success: function (result) {\r\n\r\n\r\n            var div = \"<div><a href='#' class='remover_campoPagamento btn-sm btn-danger' \" +\r\n                \"style='border-radius: 50%;margin-left: 200px;' id='\" + result.id + \"'>x</a>\" +\r\n                \"<ul class='list list-unstyled'>\" +\r\n                \"<li>ID#: \" + result.id + \"</li>\" +\r\n                \"<li>Valor: \" + (-result.valor) + \"</li>\" +\r\n                \"<li>Descrição: \" + result.descricao + \"</li>\" +\r\n                \"<li>Data: <span class='text-semibold'>\" + result.data_pagamento + \"</span>\" +\r\n                \"</li>\" +\r\n                \"</ul>\" +\r\n                \"</div>\" +\r\n                \"<input type='hidden' name='contas[]' value= '\" + result.id + \"'>\";\r\n\r\n            $(seletor).append(div);\r\n        }\r\n\r\n    });\r\n}\r\n\r\nfunction lancadosRecebimentoSelected(id, seletor) {\r\n\r\n    $.ajax({\r\n        url: \"/conciliacoes/lancadosRecebimentoSelected\",\r\n        type: \"post\",\r\n        data: {\r\n            '_token': $('input[name=_token]').val(),\r\n            'id': id\r\n        },\r\n        success: function (result) {\r\n\r\n            var div = \"<div><a href='#' class='remover_campoRecebimento btn-sm btn-danger' \" +\r\n                \"style='border-radius: 50%;margin-left: 200px;' id='\" + result.id + \"'>x</a>\" +\r\n                \"<ul class='list list-unstyled'>\" +\r\n                \"<li>ID#: \" + result.id + \"</li>\" +\r\n                \"<li>Valor: \" + (result.valor) + \"</li>\" +\r\n                \"<li>Descrição: \" + result.descricao + \"</li>\" +\r\n                \"<li>Data: <span class='text-semibold'>\" + result.data_pagamento + \"</span>\" +\r\n                \"</li>\" +\r\n                \"</ul>\" +\r\n                \"</div>\" +\r\n                \"<input type='hidden' name='contas[]' value= '\" + result.id + \"'>\";\r\n\r\n\r\n            $(seletor).append(div);\r\n        }\r\n\r\n    });\r\n}\r\n\r\n\r\nfunction isset(variable) {\r\n    return typeof variable !== typeof undefined ? true : false;\r\n}","/**\r\n * Created by pabliciotjg on 01/09/2017.\r\n */\r\n\r\n//Inicializa o modal de pesuisa\r\n$(document).on('click', '.pesquisar', function () {\r\n\r\n    valor = $(this).attr('value');\r\n\r\n    valor >= 0 ? slug = 'Recebimento' : slug = 'Pagamento';\r\n\r\n    $('.actionBtn').addClass('pesquisa');\r\n    $('.modal-title').text('Pesquisa de Lançamentos');\r\n    $('#myModal' + slug).modal('show');\r\n\r\n    idDiv = $(this).attr('id');\r\n});\r\n\r\n//Inicializa os dois modais de pagamento e recebimento\r\n$(document).ready(function () {\r\n    tabela('Recebimento');\r\n    tabela('Pagamento')\r\n});\r\n\r\n//Monta o datatable com os resultados de pesquisa de contas a pagar ou receber..\r\nfunction tabela(slug) {\r\n\r\n    //Testa se é negativo ou positivo p/ listar as contas a pagar e receber\r\n\r\n    oTable = $('#lancamento' + slug).DataTable({\r\n        autoWidth: false,\r\n        columnDefs: [{\r\n            orderable: false,\r\n            width: '200px',\r\n            targets: [1]\r\n        }],\r\n        language: {\r\n            dom: '<\"datatable-header\"fBl><\"datatable-scroll-wrap\"t><\"datatable-footer\"ip>',\r\n            search: '<span>Busca:</span> _INPUT_',\r\n            lengthMenu: 'Mostrar: _MENU_',\r\n            paginate: {'first': 'Primeiro', 'last': 'Último', 'next': '&rarr;', 'previous': '&larr;'},\r\n            sInfo: \"Mostrando de _START_ até _END_ de _TOTAL_ registros\",\r\n            sZeroRecords: \"Nenhum registro encontrado\",\r\n            sInfoEmpty: \"Mostrando 0 até 0 de 0 registros\",\r\n            sEmptyTable: \"Nenhum registro encontrado\",\r\n        },\r\n        \"processing\": true,\r\n        \"serverSide\": true,\r\n        \"type\": \"get\",\r\n        \"ajax\": \"/conciliacoes/lancados\" + slug,\r\n        \"columns\": [\r\n            {data: 'id', name: 'id'},\r\n            {data: 'data_pagamento', name: 'data_pagamento'},\r\n            {data: 'valor', name: 'valor'},\r\n            {data: 'action', name: 'action', orderable: false, searchable: false}\r\n        ]\r\n    });\r\n}\r\n\r\n//Esta função é um tanto complexa: 1° quando um usuário clica em pesquisar,\r\n//ela catura o id da conciliação que está no bd e vai no back procurar a conta a pagar ou receber\r\n//após a consulta ela adiciona os dados da conta na div da conciliação além de um hidden com o id da conta pesquisada\r\n$('#lancamentoPagamento').on(\"click\", \".btnPesquisarPagamento\", function (e) {\r\n\r\n    e.preventDefault();\r\n\r\n    id = $(this).attr('value');\r\n\r\n    $.ajax({\r\n        url: \"/conciliacoes/lancadosPagamentoSelected\",\r\n        type: \"post\",\r\n        data: {\r\n            '_token': $('input[name=_token]').val(),\r\n            'id': id\r\n        },\r\n        success: function (result) {\r\n\r\n            var seletor = '#conciliacao_' + idDiv;\r\n\r\n            //IMPORTANTE!!!!!\r\n            var idRow = '#Pagamento'+result.id;\r\n\r\n            $(idRow).hide();\r\n\r\n            var div = \"<div><a href='#' class='remover_campoPagamento btn-sm btn-danger' \" +\r\n                \"style='border-radius: 50%;margin-left: 200px;' id='\" + result.id + \"'>x</a>\" +\r\n                \"<ul class='list list-unstyled'>\" +\r\n                \"<li>ID#: \" + result.id + \"</li>\" +\r\n                \"<li>Valor: \" + (-result.valor) + \"</li>\" +\r\n                \"<li>Descrição: \" + result.descricao + \"</li>\" +\r\n                \"<li>Data: <span class='text-semibold'>\" + result.data_pagamento + \"</span>\" +\r\n                \"</li>\" +\r\n                \"</ul>\" +\r\n                \"</div>\" +\r\n                \"<input type='hidden' name='contas[]' value= '\" + result.id + \"'>\";\r\n\r\n            $(seletor).append(div);\r\n        }\r\n\r\n    });\r\n});\r\n\r\n$('#lancamentoRecebimento').on(\"click\", \".btnPesquisarRecebimento\", function (e) {\r\n\r\n    e.preventDefault();\r\n\r\n    id = $(this).attr('value');\r\n\r\n    $.ajax({\r\n        url: \"/conciliacoes/lancadosRecebimentoSelected\",\r\n        type: \"post\",\r\n        data: {\r\n            '_token': $('input[name=_token]').val(),\r\n            'id': id\r\n        },\r\n        success: function (result) {\r\n\r\n            var seletor = '#conciliacao_' + idDiv;\r\n\r\n            //IMPORTANTE!!!!!\r\n            var idRow = '#Recebimento'+result.id;\r\n\r\n            $(idRow).hide();\r\n\r\n            var div = \"<div><a href='#' class='remover_campoRecebimento btn-sm btn-danger' \" +\r\n                \"style='border-radius: 50%;margin-left: 200px;' id='\" + result.id + \"'>x</a>\" +\r\n                \"<ul class='list list-unstyled'>\" +\r\n                \"<li>ID#: \" + result.id + \"</li>\" +\r\n                \"<li>Valor: \" + (result.valor) + \"</li>\" +\r\n                \"<li>Descrição: \" + result.descricao + \"</li>\" +\r\n                \"<li>Data: <span class='text-semibold'>\" + result.data_pagamento + \"</span>\" +\r\n                \"</li>\" +\r\n                \"</ul>\" +\r\n                \"</div>\" +\r\n                \"<input type='hidden' name='contas[]' value= '\" + result.id + \"'>\";\r\n\r\n            $(seletor).append(div);\r\n        }\r\n\r\n    });\r\n});\r\n\r\n//Remove as contas que foram adicionadas e seus hiddens de id\r\n\r\n$(document).on(\"click\", \".remover_campoRecebimento\", function (e) {\r\n\r\n    e.preventDefault();\r\n\r\n    var idRow = '#Recebimento'+$(this).children('a').context.id;\r\n\r\n    $(idRow).show();\r\n\r\n    $(this).parent('div').remove();\r\n});\r\n\r\n\r\n$(document).on(\"click\", \".remover_campoPagamento\", function (e) {\r\n\r\n    e.preventDefault();\r\n\r\n    var idRow = '#Pagamento'+$(this).children('a').context.id;\r\n\r\n    $(idRow).show();\r\n\r\n    $(this).parent('div').remove();\r\n});\r\n"]}